<div class="topics-container">
  <!-- Loading state -->
  <div *ngIf="loading" class="loading-state">
    <p>Loading topics...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="!loading && error" class="error-state">
    <p class="error-message">{{ error }}</p>
    <button (click)="ngOnInit()" class="retry-button">Retry</button>
  </div>

  <!-- Content state -->
  <div *ngIf="!loading && !error" class="content-state">
    <div *ngIf="topics.length > 0; else noTopics" class="topics-grid">
      <div *ngFor="let topic of topics" class="topic-card">
        <h2>{{ topic.name }}</h2>
        <p>{{ topic.description }}</p>

        <!-- Subscribe button - shown when not subscribed -->
        <button *ngIf="!isSubscribed(topic.id)" class="subscribe-button" [disabled]="isSubscribing(topic.id)"
          (click)="onSubscribe(topic.id)">
          {{ isSubscribing(topic.id) ? 'Subscribing...' : 'S\'abonner' }}
        </button>

        <!-- Already subscribed button - shown when subscribed -->
        <button *ngIf="isSubscribed(topic.id)" class="subscribed-button" disabled>
          Déjà abonné
        </button>
      </div>
    </div>

    <ng-template #noTopics>
      <p>No topics available.</p>
    </ng-template>
  </div>
</div>